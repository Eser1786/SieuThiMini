services:
  mysql:
    image: mysql:8.0
    container_name: sieuthimini-mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: hchexui6 # Mật khẩu root (dùng chung cho nhóm)
      MYSQL_DATABASE: sieuthiminiv2 # Tên database chung
      MYSQL_USER: sieuthimini_user # Tài khoản chung cho cả nhóm
      MYSQL_PASSWORD: sieuthimini_pass123 # Mật khẩu chung
      MYSQL_ROOT_HOST: "%" # Cho phép kết nối từ mọi IP (cần cho nhóm)
    ports:
      - "3307:3306" # Mở port để mọi người kết nối từ máy local
    volumes:
      - mysql-data:/var/lib/mysql # Lưu dữ liệu vĩnh viễn
      - ./sql-init:/docker-entrypoint-initdb.d # Mount thư mục chứa script SQL khởi tạo
    command: --default-authentication-plugin=mysql_native_password # Tương thích Java cũ

volumes:
  mysql-data:
